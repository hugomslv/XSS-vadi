<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= title %> - XSS VADI</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <% const currentPage = 'chapters'; %>
  <%- include('partials/navbar') %>

  <!-- Banner d'avertissement -->
  <div class="alert alert-warning alert-banner">
    <span class="alert-icon">&#9888;</span>
    <div class="alert-content">
      <p class="alert-message"><strong>AVERTISSEMENT :</strong> Application VOLONTAIREMENT VULNERABLE - Usage pedagogique uniquement</p>
    </div>
  </div>

  <!-- Hero Section -->
  <section class="hero">
    <div class="container">
      <h1 class="hero-title">Bienvenue dans XSS VADI</h1>
      <p class="hero-subtitle">
        Apprenez a identifier et vous proteger contre les attaques Cross-Site Scripting (XSS)
        grace a des exercices pratiques et des demonstrations interactives.
      </p>
      <div class="hero-actions">
        <a href="/demo" class="btn btn-primary btn-lg">&#129514; Commencer la Demo</a>
        <a href="/activity" class="btn btn-lg">&#127919; Activite Pratique</a>
      </div>
    </div>
  </section>

  <main class="container py-xl">
    <!-- Progression -->
    <div class="stepper mb-xl">
      <div class="stepper-step completed">
        <div class="stepper-indicator">&#10003;</div>
        <span class="stepper-label">Introduction</span>
      </div>
      <div class="stepper-step active">
        <div class="stepper-indicator">2</div>
        <span class="stepper-label">Demo XSS</span>
      </div>
      <div class="stepper-step">
        <div class="stepper-indicator">3</div>
        <span class="stepper-label">Exercices</span>
      </div>
      <div class="stepper-step">
        <div class="stepper-indicator">4</div>
        <span class="stepper-label">Defenses</span>
      </div>
      <div class="stepper-step">
        <div class="stepper-indicator">5</div>
        <span class="stepper-label">Synthese</span>
      </div>
    </div>

    <!-- Chapitres -->
    <h2 class="mb-lg">&#128218; Parcours Pedagogique</h2>

    <div class="grid grid-2 mb-xl">
      <% chapters.forEach((chapter, index) => { %>
        <div class="card chapter-card card-interactive" onclick="location.href='/chapter/<%= chapter.id %>'">
          <div class="card-body">
            <div class="flex items-center gap-md mb-md">
              <div class="chapter-number"><%= chapter.order %></div>
              <div>
                <h4 class="mb-sm"><%= chapter.title.replace(/^Chapitre \d+ : /, '') %></h4>
                <span class="badge badge-primary">Chapitre <%= chapter.order %></span>
              </div>
            </div>
            <p class="text-secondary text-sm mb-md">
              <%= chapter.instructions || 'Cliquez pour acceder au chapitre' %>
            </p>
            <a href="/chapter/<%= chapter.id %>" class="btn btn-primary btn-sm">
              Commencer &#8594;
            </a>
          </div>
        </div>
      <% }) %>
    </div>

    <!-- Sections Rapides -->
    <h2 class="mb-lg">&#9889; Acces Rapide</h2>

    <div class="grid grid-3 mb-xl">
      <div class="card card-danger">
        <div class="card-header">
          <h5>&#129514; Demo Interactive</h5>
        </div>
        <div class="card-body">
          <p class="text-sm">Testez la difference entre code vulnerable et securise en temps reel.</p>
          <a href="/demo" class="btn btn-danger btn-sm">Lancer la demo</a>
        </div>
      </div>

      <div class="card card-warning">
        <div class="card-header">
          <h5>&#127919; Activite Classe</h5>
        </div>
        <div class="card-body">
          <p class="text-sm">Exercices guides de 15-20 minutes avec quiz et corrections.</p>
          <a href="/activity" class="btn btn-warning btn-sm">Demarrer l'activite</a>
        </div>
      </div>

      <div class="card card-success">
        <div class="card-header">
          <h5>&#128737; Contre-mesures</h5>
        </div>
        <div class="card-body">
          <p class="text-sm">Apprenez les techniques de defense pour developpers juniors.</p>
          <a href="/defense" class="btn btn-success btn-sm">Voir les defenses</a>
        </div>
      </div>
    </div>

    <!-- Objectifs d'apprentissage -->
    <div class="card card-primary mb-xl">
      <div class="card-header">
        <h4>&#127919; Objectifs d'apprentissage</h4>
      </div>
      <div class="card-body">
        <p class="mb-md">A la fin de ce module, vous saurez :</p>
        <ul class="checklist">
          <li class="checklist-item">Comprendre ce qu'est une attaque XSS et ses differents types</li>
          <li class="checklist-item">Identifier du code vulnerable dans une application web</li>
          <li class="checklist-item">Expliquer les risques et consequences d'une faille XSS</li>
          <li class="checklist-item">Appliquer les contre-mesures adaptees (echappement, CSP, HttpOnly...)</li>
          <li class="checklist-item">Utiliser les bonnes pratiques de securite en tant que developpeur</li>
        </ul>
      </div>
    </div>

    <% if (isAdmin) { %>
      <!-- Section Admin -->
      <div class="card card-purple mb-xl">
        <div class="card-header">
          <h4>&#128736; Zone Enseignant</h4>
        </div>
        <div class="card-body">
          <div class="grid grid-2">
            <div>
              <h5 class="mb-sm">Panneau d'administration</h5>
              <p class="text-sm mb-md">Gerez les captures, commentaires globaux et surveillez l'activite.</p>
              <a href="/admin" class="btn btn-sm">Acceder au panneau admin</a>
            </div>
            <div>
              <h5 class="mb-sm">Guide de l'enseignant</h5>
              <p class="text-sm mb-md">Consultez le guide pour animer le cours et les exercices.</p>
              <a href="/teacher-guide" class="btn btn-sm">Voir le guide</a>
            </div>
          </div>
        </div>
      </div>
    <% } %>
  </main>

  <%- include('partials/footer') %>

  <script src="/js/app.js"></script>
</body>
</html>
